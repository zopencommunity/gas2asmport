diff --git a/test/Makefile.mvs b/test/Makefile.mvs
new file mode 100644
index 0000000..6e69af7
--- /dev/null
+++ b/test/Makefile.mvs
@@ -0,0 +1,24 @@
+.SUFFIXES: .assemble .o
+.PHONY: all clean check
+.SECONDARY: .assemble
+
+MOD := ../gas2asm
+XPD := ../asmxpnd
+GASDIR=.
+HLASMDIR=actual
+
+gassrc := $(shell find $(GASDIR) -type f -name '*.s')
+hlasmsrc := $(patsubst $(GASDIR)/%,$(HLASMDIR)/%,$(gassrc:.s=.assemble))
+
+$(HLASMDIR)/%.assemble: $(GASDIR)/%.s ${MOD} ${XPD}
+	((${MOD} <$< | ${XPD} >$@) || (mv $@ $*.asm; exit 1))
+
+check: $(hlasmsrc)
+	../../bin/split-check expected check.asmok
+	fail := $(shell diff -qr actual expected | wc -l)
+	total := $(shell diff -qrs actual expected | wc -l)
+	@echo "$(fail) tests failed."
+	@echo "$(total) tests."
+
+clean:
+	rm -f actual expected check.asm
